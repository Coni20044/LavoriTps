<!DOCTYPE html>
<html lang="it"> <!-- Definisce la lingua della pagina come italiano -->
<head>
    <meta charset="UTF-8"> <!-- Imposta la codifica dei caratteri su UTF-8 per supportare tutti i caratteri speciali -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- Assicura che la pagina sia responsive sui dispositivi mobili -->
    <title>SYNTH-ETIZZATI - Carrello</title> <!-- Titolo della pagina che appare nella scheda del browser -->

    <!-- Importa il font Orbitron per un look futuristico/tecnologico -->
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700&display=swap" rel="stylesheet"> 

    <style>
        /* Impostazioni per il corpo della pagina */
        body {
            font-family: 'Orbitron', sans-serif; /* Imposta il font Orbitron per l'intero sito */
            background-color: #2c2c2c; /* Colore di sfondo grigio scuro */
            color: #f0f0f0; /* Colore del testo chiaro */
            margin: 0; /* Rimuove i margini di default */
            padding: 0; /* Rimuove il padding di default */
            display: flex; /* Usa il Flexbox per il layout */
            flex-direction: column; /* Dispone gli elementi in colonna */
            min-height: 100vh; /* Impedisce che la pagina si estenda oltre la finestra del browser */
        }

        /* Impostazioni per l'header */
        header {
            background-color: #333333; /* Colore di sfondo scuro per l'header */
            color: #C2f8CB; /* Colore del testo verde chiaro */
            padding: 20px; /* Aggiunge spazio interno nell'header */
            display: flex; /* Usa il Flexbox per il layout */
            justify-content: space-between; /* Spaziatura tra gli elementi a sinistra e a destra */
            align-items: center; /* Allinea verticalmente gli elementi al centro */
            font-size: 26px; /* Imposta la dimensione del font */
            font-weight: 700; /* Imposta il peso del font su grassetto */
        }

        header h1 {
            margin: 0; /* Rimuove il margine di default dal titolo */
            font-size: 32px; /* Imposta una dimensione piÃ¹ grande per il titolo */
        }

        /* Stili per i bottoni */
        button {
            background-color: #8367C7; /* Colore di sfondo per i bottoni */
            color: #2c2c2c; /* Colore del testo per i bottoni */
            padding: 10px 18px; /* Aggiunge spazio interno al bottone */
            border: none; /* Rimuove il bordo di default */
            border-radius: 5px; /* Aggiunge angoli arrotondati al bottone */
            cursor: pointer; /* Cambia il cursore a mano quando si passa sopra il bottone */
            font-size: 14px; /* Imposta la dimensione del font */
            margin: 10px; /* Distanza tra i bottoni */
            transition: all 0.3s ease; /* Aggiunge una transizione per le proprietÃ  del bottone */
        }

        /* Effetto hover per i bottoni */
        button:hover {
            background-color: #6f4db8; /* Cambia il colore di sfondo quando il bottone Ã¨ sopra */
            transform: scale(1.05); /* Aumenta leggermente la dimensione del bottone */
        }

        /* Contenitore del carrello */
        .cart-container {
            flex-grow: 1; /* Permette al contenitore di crescere e occupare spazio disponibile */
            max-width: 900px; /* Imposta la larghezza massima per il contenitore del carrello */
            margin: 30px auto; /* Centra il contenitore orizzontalmente e aggiunge spazio sopra e sotto */
            padding: 0 20px; /* Aggiunge spazio interno ai lati del contenitore */
        }

        /* Stile per ogni elemento del carrello */
        .cart-item {
            background-color: #424242; /* Colore di sfondo per ogni prodotto nel carrello */
            border-left: 5px solid #C2f8CB; /* Aggiunge una barra verticale verde chiaro sulla sinistra */
            border-radius: 10px; /* Angoli arrotondati per ogni elemento del carrello */
            padding: 20px; /* Spazio interno dell'elemento */
            margin-bottom: 20px; /* Spazio tra gli elementi del carrello */
            box-shadow: 0 0 10px rgba(0,0,0,0.5); /* Aggiunge un'ombra leggera */
            display: flex; /* Usa il Flexbox per il layout */
            align-items: center; /* Allinea gli elementi al centro verticalmente */
            gap: 20px; /* Spazio tra gli elementi */
        }

        /* Immagine del prodotto nel carrello */
        .cart-item img {
            width: 100px; /* Imposta la larghezza dell'immagine */
            height: auto; /* Mantiene il rapporto di aspetto */
            border-radius: 5px; /* Aggiunge angoli arrotondati all'immagine */
        }

        /* Titolo del prodotto nel carrello */
        .cart-item h3 {
            margin: 0 0 8px; /* Rimuove il margine superiore e aggiunge distanza sotto il titolo */
            color: #8367C7; /* Colore del titolo del prodotto */
            font-size: 20px; /* Imposta la dimensione del font per il titolo */
        }

        /* Descrizione del prodotto nel carrello */
        .cart-item p {
            margin: 0; /* Rimuove il margine di default */
            color: #d1d5db; /* Colore del testo grigio chiaro */
            font-size: 14px; /* Imposta la dimensione del font per la descrizione */
        }

        /* Totale dell'ordine */
        #total {
            text-align: center; /* Centra il testo */
            font-size: 22px; /* Imposta la dimensione del font */
            color: #C2f8CB; /* Colore verde chiaro per il totale */
            margin: 30px 0; /* Aggiunge spazio sopra e sotto il totale */
        }

        /* Contenitore per i bottoni centrati */
        .button-container {
            text-align: center; /* Centra i bottoni */
        }

        /* Stili per i bottoni nel contenitore */
        .button-container button {
            margin: 10px; /* Distanza tra i bottoni */
        }
    </style>
</head>
<body>

    <!-- Header con il titolo e il bottone per tornare alla home -->
    <header>
        <h1>SYNTH-ETIZZATI - Carrello</h1>
        <button onclick="window.location.href='index.html'">Home</button> <!-- Bottone che reindirizza alla home -->
    </header>

    <div class="cart-container">
        <!-- Contenitore per gli articoli nel carrello -->
        <div id="cart-items"></div> <!-- Qui verranno inseriti gli articoli del carrello -->
        <div id="total"></div> <!-- Qui verrÃ  visualizzato il totale dell'ordine -->

        <!-- Bottoni centrati per svuotare il carrello e andare al pagamento -->
        <div class="button-container">
            <button onclick="clearCart()">Svuota Carrello</button> <!-- Bottone per svuotare il carrello -->
            <button onclick="proceedToPayment()"> PAGAHHH</button> <!-- Bottone per andare alla pagina di pagamento -->
        </div>
    </div>

    <script>
        // Quando la pagina Ã¨ completamente caricata, esegui il codice
        document.addEventListener("DOMContentLoaded", function () {
            const cart = JSON.parse(localStorage.getItem("cart")) || []; <!-- Recupera il carrello salvato nel localStorage -->
            const cartItemsContainer = document.getElementById("cart-items"); <!-- Contenitore per gli articoli del carrello -->
            const totalDiv = document.getElementById("total"); <!-- Contenitore per il totale dell'ordine -->

            // Se il carrello Ã¨ vuoto, mostra un messaggio
            if (cart.length === 0) {
                cartItemsContainer.innerHTML = "<p> Il tuo carrello Ã¨ vuoto. Torna alla home per esplorare i sintetizzatori.</p>";
                return; <!-- Esce dalla funzione se il carrello Ã¨ vuoto -->
            }

            let total = 0; <!-- Inizializza la variabile per il totale dell'ordine -->

            // Per ogni prodotto nel carrello, crea un elemento HTML per mostrarlo
            cart.forEach(product => {
                const item = document.createElement("div");
                item.className = "cart-item"; <!-- Assegna una classe per lo stile -->

                // Aggiungi il contenuto HTML dell'elemento del carrello
                item.innerHTML = `
                    <img src="${product.image}" alt="${product.name}">
                    <div>
                        <h3>${product.name}</h3>
                        <p>Prezzo: ${product.price}</p>
                    </div>
                `;

                cartItemsContainer.appendChild(item); <!-- Aggiungi l'elemento al contenitore -->

                // Calcola il totale dell'ordine
                const numericPrice = parseFloat(
                    product.price.replace("â‚¬", "").replace(".", "").replace(",", ".") <!-- Rimuove il simbolo â‚¬ e converte il prezzo in formato numerico -->
                );
                total += numericPrice; <!-- Aggiungi il prezzo al totale -->
            });

            totalDiv.innerHTML = `Totale Ordine: â‚¬${total.toFixed(2)}`; <!-- Visualizza il totale dell'ordine con due decimali -->
        });

        // Funzione per svuotare il carrello
        function clearCart() {
            localStorage.removeItem("cart"); <!-- Rimuove il carrello dal localStorage -->
            location.reload(); <!-- Ricarica la pagina -->
        }

        // Funzione per procedere al pagamento
        function proceedToPayment() {
            const cart = JSON.parse(localStorage.getItem("cart")) || []; <!-- Recupera il carrello dal localStorage -->

            // Se il carrello contiene articoli, procedi al pagamento
            if (cart.length > 0) {
                localStorage.setItem("paymentCart", JSON.stringify(cart)); <!-- Salva il carrello per il pagamento -->
                window.location.href = "pagamento.html"; <!-- Reindirizza alla pagina di pagamento -->
            } else {
                alert("ðŸ›’ Il carrello Ã¨ vuoto. Aggiungi dei sintetizzatori per continuare."); <!-- Messaggio di errore se il carrello Ã¨ vuoto -->
            }
        }
    </script>

</body>
</html>
