<!DOCTYPE html> <!-- Dichiara il tipo di documento HTML5 -->
<html lang="it"> <!-- Imposta la lingua della pagina su italiano -->
<head>
<meta charset="UTF-8"> <!-- Imposta la codifica dei caratteri a UTF-8 -->
<title>Lista Nera</title> <!-- Titolo della scheda del browser (non visibile in pagina) -->

<style>
/* Layout generale */
body {
  margin: 0; /* Nessun margine intorno alla pagina */
  font-family: "Segoe UI", Tahoma, sans-serif; /* Font principale della pagina */
  background: linear-gradient(135deg, #ffe5e5, #fff5f5); /* Sfondo sfumato rosa chiaro */
  color: #5a1a1a; /* Colore del testo principale */
  display: flex; /* Utilizza Flexbox per layout verticale */
  flex-direction: column; /* Gli elementi figli saranno disposti in colonna */
  align-items: center; /* Centra gli elementi orizzontalmente */
  min-height: 100vh; /* Altezza minima della pagina = altezza finestra */
  padding: 20px; /* Spaziatura interna */
}

/* Header */
header {
  width: 100%; /* L'header occupa tutta la larghezza */
  text-align: center; /* Testo centrato */
  padding: 20px 0; /* Spaziatura verticale interna */
  background-color: #b71c1c; /* Colore di sfondo rosso scuro */
  color: white; /* Colore del testo bianco */
  font-size: 2.2em; /* Dimensione testo più grande */
  font-weight: bold; /* Testo in grassetto */
  letter-spacing: 1px; /* Spaziatura tra lettere */
  box-shadow: 0 4px 8px rgba(120,0,0,0.3); /* Ombra sotto l'header */
  border-radius: 8px; /* Angoli arrotondati */
}

/* Container principale */
.main-container {
  display: grid; /* Usa layout a griglia */
  grid-template-columns: 1fr 2fr; /* Due colonne: sinistra controlli / destra output */
  gap: 30px; /* Spazio tra le colonne */
  width: 90%; /* Larghezza complessiva container */
  margin-top: 30px; /* Margine superiore */
}

/* Colonna dei controlli */
.controls {
  display: flex; /* Flexbox verticale */
  flex-direction: column; /* Gli elementi si dispongono in colonna */
  gap: 20px; /* Spazio verticale tra i controlli */
}

/* Pulsanti e input */
input[type="button"], button, select, input[type="number"] {
  padding: 12px; /* Spaziatura interna */
  font-size: 15px; /* Dimensione testo */
  border-radius: 6px; /* Angoli arrotondati */
  border: none; /* Nessun bordo */
  cursor: pointer; /* Cambia il cursore al passaggio del mouse */
  background-color: #c62828; /* Sfondo rosso */
  color: white; /* Testo bianco */
  transition: 0.3s; /* Transizione effetti hover */
  box-shadow: 0 3px 6px rgba(150,0,0,0.25); /* Ombra leggera */
}

input[type="button"]:hover, button:hover {
  background-color: #8e0000; /* Colore scuro al passaggio del mouse */
  transform: translateY(-2px); /* Leggera animazione di spostamento */
}

select, input[type="number"] {
  width: 100%; /* Larghezza massima del contenitore */
  box-sizing: border-box; /* Include padding e bordo nella larghezza */
}

/* Output */
.output {
  background-color: #fffafa; /* Sfondo bianco-rosa chiaro */
  padding: 20px; /* Spaziatura interna */
  border-radius: 8px; /* Angoli arrotondati */
  box-shadow: 0 5px 15px rgba(120,0,0,0.25); /* Ombra leggera */
  min-height: 300px; /* Altezza minima */
  overflow-x: auto; /* Scroll orizzontale se necessario */
}

/* Tabelle */
table {
  width: 100%; /* Larghezza massima */
  border-collapse: collapse; /* Elimina spazi tra celle */
  margin-top: 15px; /* Spazio sopra la tabella */
  font-size: 16px; /* Dimensione testo tabella */
  border-radius: 8px; /* Angoli arrotondati */
  overflow: hidden; /* Nasconde parti eccedenti */
}

th, td {
  padding: 12px; /* Spaziatura interna celle */
  text-align: center; /* Testo centrato */
  border: 1px solid #ffcccc; /* Bordo rosa chiaro */
}

th {
  background-color: #b71c1c; /* Sfondo intestazione rosso scuro */
  color: white; /* Testo bianco */
  font-weight: bold; /* Grassetto */
  text-transform: uppercase; /* Maiuscole */
}

tr:nth-child(even) {
  background-color: #ffecec; /* Colore sfondo righe pari */
}

label {
  font-weight: bold; /* Grassetto per le etichette */
  margin-bottom: 5px; /* Spazio sotto l'etichetta */
}
</style>

<script>
let parseJSON= [] // Variabile globale che conterrà i dati JSON
let filehttp // Variabile globale per contenuto XML

// Funzione per caricare dati JSON
function caricaDatiJ() {
    const richiesta = new XMLHttpRequest() // Crea richiesta HTTP
    richiesta.open("GET", "https://coni20044.github.io/LavoriTps/2025/ListaNera.json", true) // URL del JSON
    richiesta.send() // Invia richiesta
    richiesta.onload = function () {
        parseJSON = JSON.parse(richiesta.responseText); // Salva dati JSON in parseJSON
    }
}

// Funzione per caricare dati XML
function caricaDatiX(){
    const richiesta= new XMLHttpRequest(); // Crea richiesta HTTP
    richiesta.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) {
            filehttp = richiesta.responseXML; // Salva XML in variabile globale
        }
    };
    richiesta.open("GET", "https://coni20044.github.io/LavoriTps/2025/ListaNera.xml", true); // URL XML
    richiesta.send(); // Invia richiesta
}

// Funzione per leggere dati XML e creare tabella
function letturaX(){
    let vittime= filehttp.documentElement.children // Tutti i tag <vittima>
    let campi= vittime[0].children; // Campi del primo elemento per intestazione
    let tabella=document.createElement("table") // Crea tabella HTML
    let intestazioneRow=document.createElement("tr") // Riga intestazione
    for(let i=0; i<campi.length; i++){
        let intestazione=document.createElement("th") // Crea intestazione colonna
        intestazione.textContent = campi[i].tagName // Nome colonna = tag XML
        intestazioneRow.appendChild(intestazione)
    }
    tabella.appendChild(intestazioneRow)
    for(let i=0; i<vittime.length; i++){
        let riga= document.createElement("tr") // Riga dati
        let dati = vittime[i].children
        for(let j=0; j<dati.length; j++){
            let intestazione = document.createElement("td") // Cella dati
            intestazione.textContent = dati[j].textContent
            riga.appendChild(intestazione)
        }
        tabella.appendChild(riga)
    }
    document.getElementById("outputX").innerHTML = ""; // Pulisce contenuto precedente
    document.getElementById("outputX").appendChild(tabella) // Aggiunge tabella
}

// Funzione per leggere dati JSON e creare tabella
function lettura(){
    let tabella= document.createElement("table")
    const chiavi=Object.keys(parseJSON[0]) // Chiavi JSON per intestazione
    let intestazioneRow=document.createElement("tr")
    for(let i=0; i<chiavi.length; i++){
        let intestazione=document.createElement("th");
        intestazione.textContent= chiavi[i]; // Testo colonna = chiave JSON
        intestazioneRow.appendChild(intestazione)
    }
    tabella.appendChild(intestazioneRow)
    for(let i=0; i<parseJSON.length ;i++){
        let righe= document.createElement("tr"); // Riga dati
        for(let j=0; j<chiavi.length; j++ ){
            let colonne= document.createElement("td") // Cella dati
            colonne.textContent = parseJSON[i][chiavi[j]] // Inserisce valore JSON
            righe.appendChild(colonne)
        }
        tabella.appendChild(righe)
    }   
    let output= document.getElementById("output")
    output.innerHTML = ""; // Pulisce eventuale tabella precedente
    output.appendChild(tabella)
}

// Funzione per stampare maggiorenni
function maggiorenni(){ 
    let maggiorenni=""
    for(let i=0;i<parseJSON.length; i++){
        if(parseJSON[i]["età"]>18){ // Condizione maggiore età
            maggiorenni += parseJSON[i]["cognome"] + " " + parseJSON[i]["età"] + "<br>"
        }
    }
    document.getElementById("outputM").innerHTML = maggiorenni
}

// Funzione ricerca cognomi per lettera
function ricerca(){
    let lettera=document.getElementById("ricerca").value
    let cognomi="I cognomi che iniziano con " + lettera + " sono: <br>"
    for (let i = 0; i < parseJSON.length; i++) {
        if(parseJSON[i]["cognome"].startsWith(lettera))
            cognomi += parseJSON[i]["cognome"] +"<br>"
    }
    document.getElementById("outputC").innerHTML = cognomi
}

// Funzione per determinare generazione dall'anno di nascita
function generazione(){
    let anno = document.getElementById("eta").value;
    let generazione = "";
    if (anno >= 1901 && anno <= 1927) generazione = "Appartieni alla Greatest Generation (1901-1927)";
    else if (anno >= 1928 && anno <= 1945) generazione = "Appartieni alla Generazione Silenziosa (1928-1945)";
    else if (anno >= 1946 && anno <= 1964) generazione = "Appartieni ai Baby Boomers (1946-1964)";
    else if (anno >= 1965 && anno <= 1980) generazione = "Appartieni alla Generazione X (1965-1980)";
    else if (anno >= 1981 && anno <= 1996) generazione = "Appartieni ai Millenials (1981-1996)";
    else if (anno >= 1997 && anno <= 2012) generazione = "Appartieni alla Generazione Z (1997-2012)";
    else if (anno >= 2013) generazione = "Appartieni alla Generazione Alpha (dal 2013 in poi)";
    else generazione = "Anno di nascita non valido";
    document.getElementById("outputG").innerHTML = generazione
}

// Funzione per caricare sia XML che JSON all'avvio
function caricaDati(){
    caricaDatiX()
    caricaDatiJ()
}
</script>
</head>

<body onload="caricaDati()">

<header>Lettura Anagrafica Riccardo Marconi</header> <!-- Titolo in alto modificato -->

<div class="main-container">

<div class="controls">
    <input type="button" value="Visualizza JSON" onclick="lettura()">
    <input type="button" value="Visualizza XML" onclick="letturaX()">
    
    <div>
      <label for="ricerca">Cognomi che iniziano con:</label>
      <select id="ricerca" name="ricerca">
        <option value="A">A</option>
        <option value="B">B</option>
        <option value="C">C</option>
        <option value="D">D</option>
        <option value="E">E</option>
        <option value="F">F</option>
        <option value="G">G</option>
        <option value="H">H</option>
        <option value="I">I</option>
        <option value="J">J</option>
        <option value="K">K</option>
        <option value="L">L</option>
        <option value="M">M</option>
        <option value="N">N</option>
        <option value="O">O</option>
        <option value="P">P</option>
        <option value="Q">Q</option>
        <option value="R">R</option>
        <option value="S">S</option>
        <option value="T">T</option>
        <option value="U">U</option>
        <option value="V">V</option>
        <option value="W">W</option>
        <option value="X">X</option>
        <option value="Y">Y</option>
        <option value="Z">Z</option>
      </select>
      <input type="button" value="Ricerca Cognomi JSON" onclick="ricerca()">
    </div>

    <div>
      <label for="eta">Inserisci anno di nascita:</label>
      <input type="number" id="eta" name="eta">
      <input type="button" value="Scopri la tua generazione" onclick="generazione()">
    </div>

    <input type="button" value="Stampa maggiorenni JSON" onclick="maggiorenni()">
</div>

<div class="output">
    <p id="output"></p> <!-- Tabella JSON -->
    <p id="outputX"></p> <!-- Tabella XML -->
    <p id="outputC"></p> <!-- Risultati ricerca cognomi -->
    <p id="outputG"></p> <!-- Risultato generazione -->
    <p id="outputM"></p> <!-- Lista maggiorenni -->
</div>

</div>
</body>
</html>
